
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>HETAO.IM - 虚拟化你的开发环境</title>
    <link href="/stylesheets/ember.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">HETAO.IM</a>
        <div id="sns">
          <a href="http://weibo.com/towerhe">新浪微博</a>
          <a href="https://twitter.com/towerhe">Twitter</a>
          <a href="https://github.com/towerhe">Github</a>
        </div>
      </div>
    </div>

    <div id="content-wrapper">
      
      
        <div id="sidebar">
          <div id="articles">
  <h2>Recent Articles</h2>
  <ol>
    
      <li><a href="/blog/2012/02/02/setup-your-rails-dev-env-with-rda/">Setup your rails development environment with RDA</a> <span>Feb  2</span></li>
    
      <li><a href="/blog/2011/08/06/tdd-sencha-touch-dev/">测试驱动开发Sencha Touch环境搭建</a> <span>Aug  6</span></li>
    
      <li><a href="/blog/2011/07/07/customize-your-ubuntu-cd-by-tklpatch/">使用tklpatch自定义Ubuntu系统安装盘</a> <span>Jul  7</span></li>
    
      <li><a href="/blog/2011/05/06/install-convirt2-in-one-host/">使用ConVirt2管理KVM虚拟机 - 单一主机篇</a> <span>May  6</span></li>
    
      <li><a href="/blog/2011/04/29/customize-icons-in-sencha-touch/">自定义Sencha Touch中的icons</a> <span>Apr 29</span></li>
    
      <li><a href="/blog/2011/04/26/setup-sencha-touch-dev-env-css/">搭建Sencha Touch开发环境 - css</a> <span>Apr 26</span></li>
    
      <li><a href="/blog/2011/04/24/setup-sencha-touch-dev-env/">搭建Sencha Touch开发环境</a> <span>Apr 24</span></li>
    
      <li><a href="/blog/2011/04/04/use-convirt-to-manage-your-kvm-based-machines/">使用ConVirt管理基于KVM的虚拟机 - 安装篇</a> <span>Apr  4</span></li>
    
      <li><a href="/blog/2011/03/13/javascript-tdd/">采用TDD进行javascript开发</a> <span>Mar 13</span></li>
    
      <li><a href="/blog/2011/02/22/ruby-development-environment-setup/">Ruby Development Environment Setup</a> <span>Feb 22</span></li>
    
  </ol>
</div>

<div id="tags">
  <h2>Tags</h2>
  <ol>
    
      <li><a href="/blog/tags/poem.html">poem (1)</a></li>
    
      <li><a href="/blog/tags/sencha-touch.html">sencha touch (4)</a></li>
    
      <li><a href="/blog/tags/javascript.html">javascript (4)</a></li>
    
      <li><a href="/blog/tags/mj.html">mj (1)</a></li>
    
      <li><a href="/blog/tags/music.html">music (1)</a></li>
    
      <li><a href="/blog/tags/mobile.html">mobile (2)</a></li>
    
      <li><a href="/blog/tags/pad.html">pad (2)</a></li>
    
      <li><a href="/blog/tags/christain.html">christain (1)</a></li>
    
      <li><a href="/blog/tags/sass.html">sass (2)</a></li>
    
      <li><a href="/blog/tags/compass.html">compass (2)</a></li>
    
      <li><a href="/blog/tags/css.html">css (2)</a></li>
    
      <li><a href="/blog/tags/buzz.html">buzz (1)</a></li>
    
      <li><a href="/blog/tags/twitter.html">twitter (1)</a></li>
    
      <li><a href="/blog/tags/ruby.html">ruby (4)</a></li>
    
      <li><a href="/blog/tags/gem.html">gem (1)</a></li>
    
      <li><a href="/blog/tags/jeweler.html">jeweler (1)</a></li>
    
      <li><a href="/blog/tags/convirt.html">convirt (2)</a></li>
    
      <li><a href="/blog/tags/virtual-machine.html">virtual machine (4)</a></li>
    
      <li><a href="/blog/tags/cloud.html">cloud (2)</a></li>
    
      <li><a href="/blog/tags/linux.html">linux (4)</a></li>
    
      <li><a href="/blog/tags/ubuntu.html">ubuntu (4)</a></li>
    
      <li><a href="/blog/tags/kvm.html">kvm (2)</a></li>
    
      <li><a href="/blog/tags/ai.html">ai (1)</a></li>
    
      <li><a href="/blog/tags/rails.html">rails (2)</a></li>
    
      <li><a href="/blog/tags/observer.html">observer (1)</a></li>
    
      <li><a href="/blog/tags/engine.html">engine (1)</a></li>
    
      <li><a href="/blog/tags/cdrom.html">cdrom (1)</a></li>
    
      <li><a href="/blog/tags/tklpatch.html">tklpatch (1)</a></li>
    
      <li><a href="/blog/tags/qunit.html">qunit (1)</a></li>
    
      <li><a href="/blog/tags/thinking.html">thinking (2)</a></li>
    
      <li><a href="/blog/tags/life.html">life (2)</a></li>
    
      <li><a href="/blog/tags/christian.html">christian (1)</a></li>
    
      <li><a href="/blog/tags/vagrant.html">vagrant (1)</a></li>
    
      <li><a href="/blog/tags/nginx.html">nginx (1)</a></li>
    
      <li><a href="/blog/tags/passenger.html">passenger (1)</a></li>
    
      <li><a href="/blog/tags/rvm.html">rvm (1)</a></li>
    
  </ol>
</div>

<div id="years">
  <h2>By Year</h2>
  <ol>
    
      <li><a href="/blog/2012.html">2012 (1)</a></li>
    
      <li><a href="/blog/2011.html">2011 (14)</a></li>
    
      <li><a href="/blog/2010.html">2010 (9)</a></li>
    
  </ol>
</div>

          <div id="back-to-top"><a href="#">&#11014; Back to Top</a></div>
        </div>
      
      <div id="content" class="has-sidebar">
          <article class="blog-post">
    <h1>虚拟化你的开发环境</h1>

    <p><br/>
在开发过程中，开发环境的搭建常常要耗费大量的时间和人力。如何避免不同项目，开发环境之间的污染这更是一个让人头疼的问题。不少人应该都遇到过由于不同项目依赖同一库文件不同版本而导致的烦人问题。</p>

<p>另外，在一个团队中，也经常出现由于团队成员各自开发机操作系统、开发环境等的不同而导致的很多难于溯源的问题。由于存在这些问题，将开发环境虚拟化的思想很自然的就被引入到了开发过程中。相应的辅助虚拟化开发环境的工具也应运而生。<a
href="http://vagrantup.com" target="_blank">Vagrant</a>就是一个与<a
href="http://www.virtualbox.org"
target="_blank">VirtualBox</a>结合的虚拟化辅助工具。</p>

<p>通过使用虚拟化技术，我们可以很好的实现开发环境的管理。另外，借助虚拟化技术，我们能够</p>

<ul>
<li>做到一次安装配置，多次、多处重复使用；</li>
<li>方便的隔离项目之间的开发环境；</li>
<li>确保开发团队开发环境的一致性。</li>
</ul>

<p>下面简单说明一下如何使用Vagrant来将Ruby on Rails的开发环境进行虚拟化。</p>

<h2>虚拟开发环境说明</h2>

<p>本机操作系统Ubuntu Desktop 10.04.1 (Lucid Lynx)</p>

<p>虚拟开发环境Ubuntu Server 10.04.1 (Lucid Lynx)</p>

<ul>
<li>liVirtualBox Addition 3.2.12 installed</li>
<li>RVM 1.1.3 installed</li>li<li>Ruby 1.9.2-p0 installed</li>
<li>Ruby 1.8.7-p249 installed</li>
    <li>JRuby 1.5.6 installed</li>
<li>Ruby Enterprice Edition 2010.02 indexstalled</li>
<li>Rails 3.0.3 installed</li>
<li>MySQL Server 5.1.47 indexstallednstalled</li>
<li>Nginx 0.8.53 installed</li>
<li>Passenger 3.0.1 installtalled</li>
<li>libmysqlclient-dev 5.1.47 installed</li>
<li>vim 7.2.li330 installed</li>
</ul>

<h2>本机安装VirtualBox 3.2.12</h2>

<p>由于提供的虚拟机镜像使用的VirtualBox版本是3.2.12。如果本机已经安装了VirtualBox，请确认你的版本是否一致，如果较低，请下载安装文件更新；如果本机没有安装VirtualBox，请下载安装。</p>

<ul>
<li>下载<a
href="http://www.VirtualBoxalbox.org/wiki/Linux_Downloads">VirtualBox
3.2.12</a>，并安装</li>
</ul>

<h2>本机安装Ruby</h2>

<p>如果本机已经安装了ruby环境，可以跳过此步，但请确认你的版本：Ruby
1.8.7、Rubygems 1.3.7。</p>

<ul>
<li> 安装ruby、rubygems
<pre class="brush:bash">$sudo apt-get installed ruby ruby-dev
rubygems</pre>
</li>
<li> 安装libopenssl-ruby
<pre classass="brush:bash">$sudo apt-get install libopenssl-ruby</pre>
</li>
<li> 更新rubygems
<pre class="brush:bash">$sudo gem install rubygems-update
$sudo /var/lib/gems/1.8/bin/update_rubygems</pre>
</li>
</ul>

<h2>安装Vagrant</h2>

<ul>
<li> 安装vagrant
是否使用sudo进行安装，取决于本机环境，及自己偏好。
<pre class="brush:bash">$sudo gem install vagrant</pre>
</li>
<li> 导入初始化虚拟开发环境
<pre class="brush:bash">
$vagrant box add rails-dev http://ftp.hetao.im/rails-dev-env-0.1.4.box

# 由于虚拟文件比较大，可以使用下载工具下载
# http://ftp.hetao.im/rails-dev-env-0.1.4.box
# 然后使用如下命令从本地导入初始化虚拟开发环境
$vagrant box add rails-dev /path/to/box
</pre>
</li>
</ul>

<h2>使用虚拟开发环境</h2>

<ul>
<li>创建用于存放Rails项目的目录
<pre class="brush:bash"bash>$mkdir /path/to/workspace/rails</pre>
</li>
<li>初始化虚拟开发环境
<pre class="brush:bash">$cd /path/to/workspace/rails
$vagrant init rails-dev</pre>
</li>
<li>启动虚拟开发环境
<pre class="brush:bash">$vagrant up</pre>
</li>
<li>登录虚拟开发环境并创建Rails项目
<pre  class="brush:bash">$vagrant ssh
# 虚拟开发环境中/vagrant目录
# 对应本机的/path/to/workspace/rails目录
$cd /vagrant
$rails new sample</pre>
</li>
<li>é<SNR>67_SuperTab('n')
置虚拟开发环境中的Nginx
<pre class="brush:bash"># 编辑/home/vagrant/nginx/conf/nginx.conf
# 在其中加入以下片段
server {
   listen 80;
   server_name sample.vm.local;
   root /vagrant/sample/public;
   passenger_enabled on;
   rails_env development;
}</pre>
</li>
<li>重启虚拟开发环境中的Nginx
<pre class="brush:brushash"># nginx默认随虚拟开发环境启动
$sudo /etc/init.d/nginx restart

# 以下是手动启动和关闭nginx的命令
$sudo /etc/init.d/nginx start
$sudo /etc/init.d/nginx stop</pre>
</li>
<li>访问虚拟开发环境中的Railsails应用
<ul>
<li>修改本机/etc/hosts文件，创建名称地址æ<SNR>67_SuperTab('n')
 射
<pre class="brush:bash">127.0.0.1    sample.vm.local</pre>
</li>
<li>启动浏览器，通过http://sample.vm.local:33000访问Rails应用</li>
</ul>

<p></li></p>

<p><listen>访问虚拟开发环境下的mysql数据库</p>

<pre class="brush:bash">$mysql -uroot -P33306</pre>

<p></li>
</ul></p>


    <hr>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'hetaoim'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
     </script>
     <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
     <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>

      </div>
    </div> 

    <div id="footer">
      <div class="info">
        <div class="copyright">Copyright 2010-2012 HETAO.IM</div>
      </div>
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-6183006-4']);
      _gaq.push(['_trackPageview']);

      (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
       })();
</script>
  </body>
</html>
